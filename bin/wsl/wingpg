#!/bin/bash -e

wslpath="anywslpath"
file_options=("-o" "--output" "--options" "--log-file")
arg_options=("--tofu-policy" "--default-key" "--encrypt-to" "--group" "--auto-key-locate" "-r" "--recipient" "-u" "--local-user")

argc=$#
argv=("$@")

for (( i=0; i<argc; i++ )); do
  if [[ "${argv[$i]:0:1}" == "-" ]]; then
    if printf '%s\n' "${arg_options[@]}" | grep -qx -- "${argv[$i]}"; then
      i=$((i+1))
    elif printf '%s\n' "${file_options[@]}" | grep -qx -- "${argv[$i]}"; then
      i=$((i+1))
      argv[$i]="$($wslpath ${argv[$i]})"
    fi
  else
    argv[$i]="$($wslpath ${argv[$i]})"
  fi
done

gpg.exe "${argv[@]}"

